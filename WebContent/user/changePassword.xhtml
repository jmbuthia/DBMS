<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

	<h:head>
	<link rel="shortcut icon" type="image/x-icon" href="#{resource['images/helmet.gif']}"/>
	 
 <title><ui:insert name="title">boda boda</ui:insert></title>

	</h:head>
	<h:body>
  <p:layout fullPage="true">
       <p:layoutUnit visible="true" position="north" size="90" resizable="true" closable="true" collapsible="true" gutter="0">
                    <ui:include src="/templetes/headerUser.xhtml" />
                </p:layoutUnit>

                 
                <p:layoutUnit position="center"   collapsible="true" collapsed="false" gutter="0">
        <f:view>
        <p:growl id="growl"  autoUpdate="true" showDetail="true"/>
             
        <h:form>   
         
<div align="center">
 <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
 
<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
   
     <i class="fa fa-spinner fa-3x fa-spin" ></i>
</p:dialog>

 <p:panelGrid  columns="3" cellpadding="5" id="changePs">
 <f:facet name="header" style="color:teal">Please fill in the details to change the password.</f:facet> 
 
<p:outputLabel for="idNo1" value="Id Number"/>
<p:inputMask id="idNo1" value="#{changePassword.idNo}" required="true" requiredMessage="id is required"  mask="99999999"
validatorMessage="Must be 8 numbers. if 7 start with 0, negative numbers are not allowed">
<f:validateLongRange minimum="0" />
<f:validateLength minimum="8" maximum="8"></f:validateLength>
</p:inputMask>
<p:message for="idNo1"/>

<p:outputLabel for="oldPassword" value="Old Password"/>
<p:password id="oldPassword" value="#{changePassword.oldPassword}" 
required="true"  requiredMessage="password is required"> 
 </p:password>
<p:message for="oldPassword"/>

<p:outputLabel for="newPassword" value="New Password"/>
<p:password id="newPassword" value="#{changePassword.newPassword}" 
required="true" inline="false" match="confirmNewPassword" requiredMessage="new password is required"
 feedback= "true" validatorMessage="Password must be more than 6 characters, Contain atleast 1 lowercase,number and uppercase">
 <f:validateRegex
		pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}" />
 </p:password>
<p:message for="newPassword"/>

<p:outputLabel for="confirmNewPassword" value="Confirm New Password"/>
<p:password id="confirmNewPassword" value="#{changePassword.newPassword}" required="true" requiredMessage="confirm new password is required"/>
<p:message for="confirmNewPassword"/>

<f:facet name="footer">
      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<p:commandButton value="Change" icon="ui-icon-check" action="#{changePassword.changePwd()}"  update="changePs" oncomplete="PF('dd').enable()"/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<p:commandButton value="Done" icon="ui-icon-check"   disabled="true" widgetVar="dd" onclick="window.location.assign('#{fromOutCome}')" />
</f:facet>
</p:panelGrid>

            
      </div>
        </h:form>
        </f:view> 
        </p:layoutUnit>
        
         <p:layoutUnit position="south" size="39" closable="true" collapsible="true" gutter="0">
                    <ui:include src="/templetes/footer.xhtml"></ui:include>
                </p:layoutUnit>
        </p:layout>
  </h:body>
</html>
